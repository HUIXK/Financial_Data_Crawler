# 金十爬虫程序说明

- **项目背景**

  根据`Jin10_Calendar.xlsx`调取进十`API`的接口，爬取数据。

  

- **程序设计流程：**

  1. 根据不同的年月日拿到金十数据的JSON格式的文件
  2. JSON格式文件转化为DATAFRAME，并存入本地以及数据库中



+ **文件说明：**

  + `data`：

    + 金十事件的所有的表以及EVENT的feature字段表

  + `Jin10_Calendar.xlsx`：存在以下三个`SHEET`

    + `Jin10_Calendar`：金十财经日历的总表，这个表需要实时更新才行。实时更新的代码放置在`金10总表更新`文件夹里
    + `EP_EVENT(金十)`：金十字段的对应表，包含事件名、表名、金十中文字段和id
    + `EP_EVENT(最新)`：对接Investing和金十的表，在金十爬虫里基本没用。

  + `trading_calendar.csv`：财经日历时刻表，事件时间和对应事件名字

  + `jin10_in_time.py`程序：再事件开始前运行，自动抓取金十数据并存入数据库

  + `jin10.ipynb`程序：调试程序，如果有什么问题可以在里面慢慢调试修改

    

- **安装方法**

  在运行程序之前，请确保安装了以下必要的第三方库

  + Pandas
  + Json

  对于没有相关的依赖库，需要使用`pip install '库名'`或者`conda install '库名'`，**选取解释器时，注意Conda环境下是否存在相关的依赖库，建议使用Conda下的base环境。**

  

+ **各程序说明**

  + `jin10_in_time.py`程序：及时获取金十平台更新的事件数据

    + 是否完结：~~经8月23日测试，程序已完结~~
    + 程序功能：通过对应的API接口，采用request库进行获取`JSON`文件，获取后的`JSON`文件转化为`DATAFRAME`，经最终处理放在本地和数据库中
    + 注意：一定要根据`id`序列去寻找获取，当id序列有变的时候，需要手动更新！!有些事件名一样，但id序列不一样，其原因在于一个是月初公布，一个是月末公布！

  + `jin10历史数据更新.py`程序：更新指定时期的历史事件表

    + 是否完结：~~经8月23日测试，程序已完结~~
    + 程序功能：根据金十财经日历的总表，更新指定时期的所需要的历史事件表
    + 注意：总表的更新程序在jin10总表更新里面。

  + `jin10总表更新文件夹`：

    + 是否完结：~~完结，日期未知~~

    + 程序功能：获取金十财经日历的总表，并存入`BANK_PLT`数据库的`financial_calendar`表中

    + 注意：该代码由以前的同事撰写，翟建勋那里可以稳定运行，若有问题可以问问他。

      

- **上手指南**

  根目录下的两个文件直接运行就好，如果程序出现错误，请根据错误提示进行检查！

  

- **作者**

  [陈颖航](https://github.com/jason51108)

